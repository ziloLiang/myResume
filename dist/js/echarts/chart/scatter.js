/*! myResume 2015-07-06 */
define("echarts/chart/scatter",["require","./base","../util/shape/Symbol","../component/axis","../component/grid","../component/dataZoom","../component/dataRange","../config","zrender/tool/util","zrender/tool/color","../chart"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("../util/shape/Symbol");a("../component/axis"),a("../component/grid"),a("../component/dataZoom"),a("../component/dataRange");var e=a("../config");e.scatter={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbolSize:4,large:!1,largeThreshold:2e3,itemStyle:{normal:{label:{show:!1}},emphasis:{label:{show:!1}}}};var f=a("zrender/tool/util"),g=a("zrender/tool/color");return b.prototype={type:e.CHART_TYPE_SCATTER,_buildShape:function(){var a=this.series;this._sIndex2ColorMap={},this._symbol=this.option.symbolList,this._sIndex2ShapeMap={},this.selectedMap={},this.xMarkMap={};for(var b,c,d,f,h=this.component.legend,i=[],j=0,k=a.length;k>j;j++)if(b=a[j],c=b.name,b.type===e.CHART_TYPE_SCATTER){if(a[j]=this.reformOption(a[j]),this.legendHoverLink=a[j].legendHoverLink||this.legendHoverLink,this._sIndex2ShapeMap[j]=this.query(b,"symbol")||this._symbol[j%this._symbol.length],h){if(this.selectedMap[c]=h.isSelected(c),this._sIndex2ColorMap[j]=g.alpha(h.getColor(c),.5),d=h.getItemShape(c)){var f=this._sIndex2ShapeMap[j];d.style.brushType=f.match("empty")?"stroke":"both",f=f.replace("empty","").toLowerCase(),f.match("rectangle")&&(d.style.x+=Math.round((d.style.width-d.style.height)/2),d.style.width=d.style.height),f.match("star")&&(d.style.n=f.replace("star","")-0||5,f="star"),f.match("image")&&(d.style.image=f.replace(new RegExp("^image:\\/\\/"),""),d.style.x+=Math.round((d.style.width-d.style.height)/2),d.style.width=d.style.height,f="image"),d.style.iconType=f,h.setItemShape(c,d)}}else this.selectedMap[c]=!0,this._sIndex2ColorMap[j]=g.alpha(this.zr.getColor(j),.5);this.selectedMap[c]&&i.push(j)}this._buildSeries(i),this.addShapeList()},_buildSeries:function(a){if(0!==a.length){for(var b,c,d,e,f,g,h,i,j=this.series,k={},l=0,m=a.length;m>l;l++)if(b=a[l],c=j[b],0!==c.data.length){f=this.component.xAxis.getAxis(c.xAxisIndex||0),g=this.component.yAxis.getAxis(c.yAxisIndex||0),k[b]=[];for(var n=0,o=c.data.length;o>n;n++)d=c.data[n],e=this.getDataFromOption(d,"-"),"-"===e||e.length<2||(h=f.getCoord(e[0]),i=g.getCoord(e[1]),k[b].push([h,i,n,d.name||""]));this.xMarkMap[b]=this._markMap(f,g,c.data,k[b]),this.buildMark(b)}this._buildPointList(k)}},_markMap:function(a,b,c,d){for(var e,f={min0:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,sum0:0,counter0:0,average0:0,min1:Number.POSITIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum1:0,counter1:0,average1:0},g=0,h=d.length;h>g;g++)e=c[d[g][2]].value||c[d[g][2]],f.min0>e[0]&&(f.min0=e[0],f.minY0=d[g][1],f.minX0=d[g][0]),f.max0<e[0]&&(f.max0=e[0],f.maxY0=d[g][1],f.maxX0=d[g][0]),f.sum0+=e[0],f.counter0++,f.min1>e[1]&&(f.min1=e[1],f.minY1=d[g][1],f.minX1=d[g][0]),f.max1<e[1]&&(f.max1=e[1],f.maxY1=d[g][1],f.maxX1=d[g][0]),f.sum1+=e[1],f.counter1++;var i=this.component.grid.getX(),j=this.component.grid.getXend(),k=this.component.grid.getY(),l=this.component.grid.getYend();f.average0=f.sum0/f.counter0;var m=a.getCoord(f.average0);f.averageLine0=[[m,l],[m,k]],f.minLine0=[[f.minX0,l],[f.minX0,k]],f.maxLine0=[[f.maxX0,l],[f.maxX0,k]],f.average1=f.sum1/f.counter1;var n=b.getCoord(f.average1);return f.averageLine1=[[i,n],[j,n]],f.minLine1=[[i,f.minY1],[j,f.minY1]],f.maxLine1=[[i,f.maxY1],[j,f.maxY1]],f},_buildPointList:function(a){var b,c,d,e,f=this.series;for(var g in a)if(b=f[g],c=a[g],b.large&&b.data.length>b.largeThreshold)this.shapeList.push(this._getLargeSymbol(b,c,this.getItemStyleColor(this.query(b,"itemStyle.normal.color"),g,-1)||this._sIndex2ColorMap[g]));else for(var h=0,i=c.length;i>h;h++)d=c[h],e=this._getSymbol(g,d[2],d[3],d[0],d[1]),e&&this.shapeList.push(e)},_getSymbol:function(a,b,c,d,e){var f,g=this.series,h=g[a],i=h.data[b],j=this.component.dataRange;if(j){if(f=isNaN(i[2])?this._sIndex2ColorMap[a]:j.getColor(i[2]),!f)return null}else f=this._sIndex2ColorMap[a];var k=this.getSymbolShape(h,a,i,b,c,d,e,this._sIndex2ShapeMap[a],f,"rgba(0,0,0,0)","vertical");return k.zlevel=h.zlevel,k.z=h.z,k._main=!0,k},_getLargeSymbol:function(a,b,c){return new d({zlevel:a.zlevel,z:a.z,_main:!0,hoverable:!1,style:{pointList:b,color:c,strokeColor:c},highlightStyle:{pointList:[]}})},getMarkCoord:function(a,b){var c,d=this.series[a],e=this.xMarkMap[a],f=this.component.xAxis.getAxis(d.xAxisIndex),g=this.component.yAxis.getAxis(d.yAxisIndex);if(!b.type||"max"!==b.type&&"min"!==b.type&&"average"!==b.type)c=["string"!=typeof b.xAxis&&f.getCoordByIndex?f.getCoordByIndex(b.xAxis||0):f.getCoord(b.xAxis||0),"string"!=typeof b.yAxis&&g.getCoordByIndex?g.getCoordByIndex(b.yAxis||0):g.getCoord(b.yAxis||0)];else{var h=null!=b.valueIndex?b.valueIndex:1;c=[e[b.type+"X"+h],e[b.type+"Y"+h],e[b.type+"Line"+h],e[b.type+h]]}return c},refresh:function(a){a&&(this.option=a,this.series=a.series),this.backupShapeList(),this._buildShape()},ondataRange:function(a,b){this.component.dataRange&&(this.refresh(),b.needRefresh=!0)}},f.inherits(b,c),a("../chart").define("scatter",b),b}),define("echarts/component/dataRange",["require","./base","zrender/shape/Text","zrender/shape/Rectangle","../util/shape/HandlePolygon","../config","zrender/tool/util","zrender/tool/event","zrender/tool/area","zrender/tool/color","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f);var h=this;h._ondrift=function(a,b){return h.__ondrift(this,a,b)},h._ondragend=function(){return h.__ondragend()},h._dataRangeSelected=function(a){return h.__dataRangeSelected(a)},h._dispatchHoverLink=function(a){return h.__dispatchHoverLink(a)},h._onhoverlink=function(a){return h.__onhoverlink(a)},this._selectedMap={},this._range={},this.refresh(e),b.bind(g.EVENT.HOVER,this._onhoverlink)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Rectangle"),f=a("../util/shape/HandlePolygon"),g=a("../config");g.dataRange={zlevel:0,z:4,show:!0,orient:"vertical",x:"left",y:"bottom",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemWidth:20,itemHeight:14,precision:0,splitNumber:5,splitList:null,calculable:!1,selectedMode:!0,hoverLink:!0,realtime:!0,color:["#006edd","#e0ffff"],textStyle:{color:"#333"}};var h=a("zrender/tool/util"),i=a("zrender/tool/event"),j=a("zrender/tool/area"),k=a("zrender/tool/color");return b.prototype={type:g.COMPONENT_TYPE_DATARANGE,_textGap:10,_buildShape:function(){if(this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._isContinuity()?this._buildGradient():this._buildItem(),this.dataRangeOption.show)for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a]);this._syncShapeFromRange()},_buildItem:function(){var a,b,c,f,g=this._valueTextList,h=g.length,i=this.getFont(this.dataRangeOption.textStyle),k=this._itemGroupLocation.x,l=this._itemGroupLocation.y,m=this.dataRangeOption.itemWidth,n=this.dataRangeOption.itemHeight,o=this.dataRangeOption.itemGap,p=j.getTextHeight("国",i);"vertical"==this.dataRangeOption.orient&&"right"==this.dataRangeOption.x&&(k=this._itemGroupLocation.x+this._itemGroupLocation.width-m);var q=!0;this.dataRangeOption.text&&(q=!1,this.dataRangeOption.text[0]&&(c=this._getTextShape(k,l,this.dataRangeOption.text[0]),"horizontal"==this.dataRangeOption.orient?k+=j.getTextWidth(this.dataRangeOption.text[0],i)+this._textGap:(l+=p+this._textGap,c.style.y+=p/2+this._textGap,c.style.textBaseline="bottom"),this.shapeList.push(new d(c))));for(var r=0;h>r;r++)a=g[r],f=this.getColorByIndex(r),b=this._getItemShape(k,l,m,n,this._selectedMap[r]?f:"#ccc"),b._idx=r,b.onmousemove=this._dispatchHoverLink,this.dataRangeOption.selectedMode&&(b.clickable=!0,b.onclick=this._dataRangeSelected),this.shapeList.push(new e(b)),q&&(c={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:k+m+5,y:l,color:this._selectedMap[r]?this.dataRangeOption.textStyle.color:"#ccc",text:g[r],textFont:i,textBaseline:"top"},highlightStyle:{brushType:"fill"}},"vertical"==this.dataRangeOption.orient&&"right"==this.dataRangeOption.x&&(c.style.x-=m+10,c.style.textAlign="right"),c._idx=r,c.onmousemove=this._dispatchHoverLink,this.dataRangeOption.selectedMode&&(c.clickable=!0,c.onclick=this._dataRangeSelected),this.shapeList.push(new d(c))),"horizontal"==this.dataRangeOption.orient?k+=m+(q?5:0)+(q?j.getTextWidth(a,i):0)+o:l+=n+o;!q&&this.dataRangeOption.text[1]&&("horizontal"==this.dataRangeOption.orient?k=k-o+this._textGap:l=l-o+this._textGap,c=this._getTextShape(k,l,this.dataRangeOption.text[1]),"horizontal"!=this.dataRangeOption.orient&&(c.style.y-=5,c.style.textBaseline="top"),this.shapeList.push(new d(c)))},_buildGradient:function(){var b,c,f=this.getFont(this.dataRangeOption.textStyle),g=this._itemGroupLocation.x,h=this._itemGroupLocation.y,i=this.dataRangeOption.itemWidth,k=this.dataRangeOption.itemHeight,l=j.getTextHeight("国",f),m=10,n=!0;this.dataRangeOption.text&&(n=!1,this.dataRangeOption.text[0]&&(c=this._getTextShape(g,h,this.dataRangeOption.text[0]),"horizontal"==this.dataRangeOption.orient?g+=j.getTextWidth(this.dataRangeOption.text[0],f)+this._textGap:(h+=l+this._textGap,c.style.y+=l/2+this._textGap,c.style.textBaseline="bottom"),this.shapeList.push(new d(c))));for(var o=a("zrender/tool/color"),p=1/(this.dataRangeOption.color.length-1),q=[],r=0,s=this.dataRangeOption.color.length;s>r;r++)q.push([r*p,this.dataRangeOption.color[r]]);"horizontal"==this.dataRangeOption.orient?(b={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:g,y:h,width:i*m,height:k,color:o.getLinearGradient(g,h,g+i*m,h,q)},hoverable:!1},g+=i*m+this._textGap):(b={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:g,y:h,width:i,height:k*m,color:o.getLinearGradient(g,h,g,h+k*m,q)},hoverable:!1},h+=k*m+this._textGap),this.shapeList.push(new e(b)),this._calculableLocation=b.style,this.dataRangeOption.calculable&&(this._buildFiller(),this._bulidMask(),this._bulidHandle()),this._buildIndicator(),!n&&this.dataRangeOption.text[1]&&(c=this._getTextShape(g,h,this.dataRangeOption.text[1]),this.shapeList.push(new d(c)))},_buildIndicator:function(){var a,b,c=this._calculableLocation.x,d=this._calculableLocation.y,e=this._calculableLocation.width,g=this._calculableLocation.height,h=5;"horizontal"==this.dataRangeOption.orient?"bottom"!=this.dataRangeOption.y?(a=[[c,d+g],[c-h,d+g+h],[c+h,d+g+h]],b="bottom"):(a=[[c,d],[c-h,d-h],[c+h,d-h]],b="top"):"right"!=this.dataRangeOption.x?(a=[[c+e,d],[c+e+h,d-h],[c+e+h,d+h]],b="right"):(a=[[c,d],[c-h,d-h],[c-h,d+h]],b="left"),this._indicatorShape={style:{pointList:a,color:"#fff",__rect:{x:Math.min(a[0][0],a[1][0]),y:Math.min(a[0][1],a[1][1]),width:h*("horizontal"==this.dataRangeOption.orient?2:1),height:h*("horizontal"==this.dataRangeOption.orient?1:2)}},highlightStyle:{brushType:"fill",textPosition:b,textColor:this.dataRangeOption.textStyle.color},hoverable:!1},this._indicatorShape=new f(this._indicatorShape)},_buildFiller:function(){this._fillerShape={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:this._calculableLocation.x,y:this._calculableLocation.y,width:this._calculableLocation.width,height:this._calculableLocation.height,color:"rgba(255,255,255,0)"},highlightStyle:{strokeColor:"rgba(255,255,255,0.5)",lineWidth:1},draggable:!0,ondrift:this._ondrift,ondragend:this._ondragend,onmousemove:this._dispatchHoverLink,_type:"filler"},this._fillerShape=new e(this._fillerShape),this.shapeList.push(this._fillerShape)},_bulidHandle:function(){var a,b,c,d,e,g,h,i,k=this._calculableLocation.x,l=this._calculableLocation.y,m=this._calculableLocation.width,n=this._calculableLocation.height,o=this.getFont(this.dataRangeOption.textStyle),p=j.getTextHeight("国",o),q=Math.max(j.getTextWidth(this._textFormat(this.dataRangeOption.max),o),j.getTextWidth(this._textFormat(this.dataRangeOption.min),o))+2;"horizontal"==this.dataRangeOption.orient?"bottom"!=this.dataRangeOption.y?(a=[[k,l],[k,l+n+p],[k-p,l+n+p],[k-1,l+n],[k-1,l]],b=k-q/2-p,c=l+n+p/2+2,d={x:k-q-p,y:l+n,width:q+p,height:p},e=[[k+m,l],[k+m,l+n+p],[k+m+p,l+n+p],[k+m+1,l+n],[k+m+1,l]],g=k+m+q/2+p,h=c,i={x:k+m,y:l+n,width:q+p,height:p}):(a=[[k,l+n],[k,l-p],[k-p,l-p],[k-1,l],[k-1,l+n]],b=k-q/2-p,c=l-p/2-2,d={x:k-q-p,y:l-p,width:q+p,height:p},e=[[k+m,l+n],[k+m,l-p],[k+m+p,l-p],[k+m+1,l],[k+m+1,l+n]],g=k+m+q/2+p,h=c,i={x:k+m,y:l-p,width:q+p,height:p}):(q+=p,"right"!=this.dataRangeOption.x?(a=[[k,l],[k+m+p,l],[k+m+p,l-p],[k+m,l-1],[k,l-1]],b=k+m+q/2+p/2,c=l-p/2,d={x:k+m,y:l-p,width:q+p,height:p},e=[[k,l+n],[k+m+p,l+n],[k+m+p,l+p+n],[k+m,l+1+n],[k,l+n+1]],g=b,h=l+n+p/2,i={x:k+m,y:l+n,width:q+p,height:p}):(a=[[k+m,l],[k-p,l],[k-p,l-p],[k,l-1],[k+m,l-1]],b=k-q/2-p/2,c=l-p/2,d={x:k-q-p,y:l-p,width:q+p,height:p},e=[[k+m,l+n],[k-p,l+n],[k-p,l+p+n],[k,l+1+n],[k+m,l+n+1]],g=b,h=l+n+p/2,i={x:k-q-p,y:l+n,width:q+p,height:p})),this._startShape={style:{pointList:a,text:this._textFormat(this.dataRangeOption.max),textX:b,textY:c,textFont:o,color:this.getColor(this.dataRangeOption.max),rect:d,x:a[0][0],y:a[0][1],_x:a[0][0],_y:a[0][1]}},this._startShape.highlightStyle={strokeColor:this._startShape.style.color,lineWidth:1},this._endShape={style:{pointList:e,text:this._textFormat(this.dataRangeOption.min),textX:g,textY:h,textFont:o,color:this.getColor(this.dataRangeOption.min),rect:i,x:e[0][0],y:e[0][1],_x:e[0][0],_y:e[0][1]}},this._endShape.highlightStyle={strokeColor:this._endShape.style.color,lineWidth:1},this._startShape.zlevel=this._endShape.zlevel=this.getZlevelBase(),this._startShape.z=this._endShape.z=this.getZBase()+1,this._startShape.draggable=this._endShape.draggable=!0,this._startShape.ondrift=this._endShape.ondrift=this._ondrift,this._startShape.ondragend=this._endShape.ondragend=this._ondragend,this._startShape.style.textColor=this._endShape.style.textColor=this.dataRangeOption.textStyle.color,this._startShape.style.textAlign=this._endShape.style.textAlign="center",this._startShape.style.textPosition=this._endShape.style.textPosition="specific",this._startShape.style.textBaseline=this._endShape.style.textBaseline="middle",this._startShape.style.width=this._endShape.style.width=0,this._startShape.style.height=this._endShape.style.height=0,this._startShape.style.textPosition=this._endShape.style.textPosition="specific",this._startShape=new f(this._startShape),this._endShape=new f(this._endShape),this.shapeList.push(this._startShape),this.shapeList.push(this._endShape)},_bulidMask:function(){var a=this._calculableLocation.x,b=this._calculableLocation.y,c=this._calculableLocation.width,d=this._calculableLocation.height;this._startMask={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:a,y:b,width:"horizontal"==this.dataRangeOption.orient?0:c,height:"horizontal"==this.dataRangeOption.orient?d:0,color:"#ccc"},hoverable:!1},this._endMask={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:"horizontal"==this.dataRangeOption.orient?a+c:a,y:"horizontal"==this.dataRangeOption.orient?b:b+d,width:"horizontal"==this.dataRangeOption.orient?0:c,height:"horizontal"==this.dataRangeOption.orient?d:0,color:"#ccc"},hoverable:!1},this._startMask=new e(this._startMask),this._endMask=new e(this._endMask),this.shapeList.push(this._startMask),this.shapeList.push(this._endMask)},_buildBackground:function(){var a=this.reformCssArray(this.dataRangeOption.padding);this.shapeList.push(new e({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-a[3],y:this._itemGroupLocation.y-a[0],width:this._itemGroupLocation.width+a[3]+a[1],height:this._itemGroupLocation.height+a[0]+a[2],brushType:0===this.dataRangeOption.borderWidth?"fill":"both",color:this.dataRangeOption.backgroundColor,strokeColor:this.dataRangeOption.borderColor,lineWidth:this.dataRangeOption.borderWidth}}))},_getItemGroupLocation:function(){var a=this._valueTextList,b=a.length,c=this.dataRangeOption.itemGap,d=this.dataRangeOption.itemWidth,e=this.dataRangeOption.itemHeight,f=0,g=0,h=this.getFont(this.dataRangeOption.textStyle),i=j.getTextHeight("国",h),k=10;if("horizontal"==this.dataRangeOption.orient){if(this.dataRangeOption.text||this._isContinuity())f=(this._isContinuity()?d*k+c:b*(d+c))+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[0]?j.getTextWidth(this.dataRangeOption.text[0],h)+this._textGap:0)+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[1]?j.getTextWidth(this.dataRangeOption.text[1],h)+this._textGap:0);else{d+=5;for(var l=0;b>l;l++)f+=d+j.getTextWidth(a[l],h)+c}f-=c,g=Math.max(i,e)}else{var m;if(this.dataRangeOption.text||this._isContinuity())g=(this._isContinuity()?e*k+c:b*(e+c))+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[0]?this._textGap+i:0)+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[1]?this._textGap+i:0),m=Math.max(j.getTextWidth(this.dataRangeOption.text&&this.dataRangeOption.text[0]||"",h),j.getTextWidth(this.dataRangeOption.text&&this.dataRangeOption.text[1]||"",h)),f=Math.max(d,m);else{g=(e+c)*b,d+=5,m=0;for(var l=0;b>l;l++)m=Math.max(m,j.getTextWidth(a[l],h));f=d+m}g-=c}var n,o=this.reformCssArray(this.dataRangeOption.padding),p=this.zr.getWidth();switch(this.dataRangeOption.x){case"center":n=Math.floor((p-f)/2);break;case"left":n=o[3]+this.dataRangeOption.borderWidth;break;case"right":n=p-f-o[1]-this.dataRangeOption.borderWidth;break;default:n=this.parsePercent(this.dataRangeOption.x,p),n=isNaN(n)?0:n}var q,r=this.zr.getHeight();switch(this.dataRangeOption.y){case"top":q=o[0]+this.dataRangeOption.borderWidth;break;case"bottom":q=r-g-o[2]-this.dataRangeOption.borderWidth;break;case"center":q=Math.floor((r-g)/2);break;default:q=this.parsePercent(this.dataRangeOption.y,r),q=isNaN(q)?0:q}if(this.dataRangeOption.calculable){var s=Math.max(j.getTextWidth(this.dataRangeOption.max,h),j.getTextWidth(this.dataRangeOption.min,h))+i;"horizontal"==this.dataRangeOption.orient?(s>n&&(n=s),n+f+s>p&&(n-=s)):(i>q&&(q=i),q+g+i>r&&(q-=i))}return{x:n,y:q,width:f,height:g}},_getTextShape:function(a,b,c){return{zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:"horizontal"==this.dataRangeOption.orient?a:this._itemGroupLocation.x+this._itemGroupLocation.width/2,y:"horizontal"==this.dataRangeOption.orient?this._itemGroupLocation.y+this._itemGroupLocation.height/2:b,color:this.dataRangeOption.textStyle.color,text:c,textFont:this.getFont(this.dataRangeOption.textStyle),textBaseline:"horizontal"==this.dataRangeOption.orient?"middle":"top",textAlign:"horizontal"==this.dataRangeOption.orient?"left":"center"},hoverable:!1}},_getItemShape:function(a,b,c,d,e){return{zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:a,y:b+1,width:c,height:d-2,color:e},highlightStyle:{strokeColor:e,lineWidth:1}}},__ondrift:function(a,b,c){var d=this._calculableLocation.x,e=this._calculableLocation.y,f=this._calculableLocation.width,g=this._calculableLocation.height;return"horizontal"==this.dataRangeOption.orient?a.style.x+b<=d?a.style.x=d:a.style.x+b+a.style.width>=d+f?a.style.x=d+f-a.style.width:a.style.x+=b:a.style.y+c<=e?a.style.y=e:a.style.y+c+a.style.height>=e+g?a.style.y=e+g-a.style.height:a.style.y+=c,"filler"==a._type?this._syncHandleShape():this._syncFillerShape(a),this.dataRangeOption.realtime&&this._dispatchDataRange(),!0},__ondragend:function(){this.isDragend=!0},ondragend:function(a,b){this.isDragend&&a.target&&(b.dragOut=!0,b.dragIn=!0,this.dataRangeOption.realtime||this._dispatchDataRange(),b.needRefresh=!1,this.isDragend=!1)},_syncShapeFromRange:function(){var a=this.dataRangeOption.range||{},b=a.start,c=a.end;if(b>c&&(b=[c,c=b][0]),this._range.end=null!=b?b:null!=this._range.end?this._range.end:0,this._range.start=null!=c?c:null!=this._range.start?this._range.start:100,100!=this._range.start||0!==this._range.end){if("horizontal"==this.dataRangeOption.orient){var d=this._fillerShape.style.width;this._fillerShape.style.x+=d*(100-this._range.start)/100,this._fillerShape.style.width=d*(this._range.start-this._range.end)/100}else{var e=this._fillerShape.style.height;this._fillerShape.style.y+=e*(100-this._range.start)/100,this._fillerShape.style.height=e*(this._range.start-this._range.end)/100}this.zr.modShape(this._fillerShape.id),this._syncHandleShape()}},_syncHandleShape:function(){var a=this._calculableLocation.x,b=this._calculableLocation.y,c=this._calculableLocation.width,d=this._calculableLocation.height;"horizontal"==this.dataRangeOption.orient?(this._startShape.style.x=this._fillerShape.style.x,this._startMask.style.width=this._startShape.style.x-a,this._endShape.style.x=this._fillerShape.style.x+this._fillerShape.style.width,this._endMask.style.x=this._endShape.style.x,this._endMask.style.width=a+c-this._endShape.style.x,this._range.start=Math.ceil(100-(this._startShape.style.x-a)/c*100),this._range.end=Math.floor(100-(this._endShape.style.x-a)/c*100)):(this._startShape.style.y=this._fillerShape.style.y,this._startMask.style.height=this._startShape.style.y-b,this._endShape.style.y=this._fillerShape.style.y+this._fillerShape.style.height,this._endMask.style.y=this._endShape.style.y,this._endMask.style.height=b+d-this._endShape.style.y,this._range.start=Math.ceil(100-(this._startShape.style.y-b)/d*100),this._range.end=Math.floor(100-(this._endShape.style.y-b)/d*100)),this._syncShape()},_syncFillerShape:function(a){var b,c,d=this._calculableLocation.x,e=this._calculableLocation.y,f=this._calculableLocation.width,g=this._calculableLocation.height;"horizontal"==this.dataRangeOption.orient?(b=this._startShape.style.x,c=this._endShape.style.x,a.id==this._startShape.id&&b>=c?(c=b,this._endShape.style.x=b):a.id==this._endShape.id&&b>=c&&(b=c,this._startShape.style.x=b),this._fillerShape.style.x=b,this._fillerShape.style.width=c-b,this._startMask.style.width=b-d,this._endMask.style.x=c,this._endMask.style.width=d+f-c,this._range.start=Math.ceil(100-(b-d)/f*100),this._range.end=Math.floor(100-(c-d)/f*100)):(b=this._startShape.style.y,c=this._endShape.style.y,a.id==this._startShape.id&&b>=c?(c=b,this._endShape.style.y=b):a.id==this._endShape.id&&b>=c&&(b=c,this._startShape.style.y=b),this._fillerShape.style.y=b,this._fillerShape.style.height=c-b,this._startMask.style.height=b-e,this._endMask.style.y=c,this._endMask.style.height=e+g-c,this._range.start=Math.ceil(100-(b-e)/g*100),this._range.end=Math.floor(100-(c-e)/g*100)),this._syncShape()},_syncShape:function(){this._startShape.position=[this._startShape.style.x-this._startShape.style._x,this._startShape.style.y-this._startShape.style._y],this._startShape.style.text=this._textFormat(this._gap*this._range.start+this.dataRangeOption.min),this._startShape.style.color=this._startShape.highlightStyle.strokeColor=this.getColor(this._gap*this._range.start+this.dataRangeOption.min),this._endShape.position=[this._endShape.style.x-this._endShape.style._x,this._endShape.style.y-this._endShape.style._y],this._endShape.style.text=this._textFormat(this._gap*this._range.end+this.dataRangeOption.min),this._endShape.style.color=this._endShape.highlightStyle.strokeColor=this.getColor(this._gap*this._range.end+this.dataRangeOption.min),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.modShape(this._startMask.id),this.zr.modShape(this._endMask.id),this.zr.modShape(this._fillerShape.id),this.zr.refreshNextFrame()},_dispatchDataRange:function(){this.messageCenter.dispatch(g.EVENT.DATA_RANGE,null,{range:{start:this._range.end,end:this._range.start}},this.myChart)},__dataRangeSelected:function(a){if("single"===this.dataRangeOption.selectedMode)for(var b in this._selectedMap)this._selectedMap[b]=!1;var c=a.target._idx;this._selectedMap[c]=!this._selectedMap[c];var d,e;this._useCustomizedSplit()?(d=this._splitList[c].max,e=this._splitList[c].min):(d=(this._colorList.length-c)*this._gap+this.dataRangeOption.min,e=d-this._gap),this.messageCenter.dispatch(g.EVENT.DATA_RANGE_SELECTED,a.event,{selected:this._selectedMap,target:c,valueMax:d,valueMin:e},this.myChart),this.messageCenter.dispatch(g.EVENT.REFRESH,null,null,this.myChart)},__dispatchHoverLink:function(a){var b,c;if(this.dataRangeOption.calculable){var d,e=this.dataRangeOption.max-this.dataRangeOption.min;d="horizontal"==this.dataRangeOption.orient?(1-(i.getX(a.event)-this._calculableLocation.x)/this._calculableLocation.width)*e:(1-(i.getY(a.event)-this._calculableLocation.y)/this._calculableLocation.height)*e,b=d-.05*e,c=d+.05*e}else if(this._useCustomizedSplit()){var f=a.target._idx;c=this._splitList[f].max,b=this._splitList[f].min}else{var f=a.target._idx;c=(this._colorList.length-f)*this._gap+this.dataRangeOption.min,b=c-this._gap}this.messageCenter.dispatch(g.EVENT.DATA_RANGE_HOVERLINK,a.event,{valueMin:b,valueMax:c},this.myChart)},__onhoverlink:function(a){if(this.dataRangeOption.show&&this.dataRangeOption.hoverLink&&this._indicatorShape&&a&&null!=a.seriesIndex&&null!=a.dataIndex){var b=a.value;if(""===b||isNaN(b))return;b<this.dataRangeOption.min?b=this.dataRangeOption.min:b>this.dataRangeOption.max&&(b=this.dataRangeOption.max),"horizontal"==this.dataRangeOption.orient?this._indicatorShape.position=[(this.dataRangeOption.max-b)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._calculableLocation.width,0]:this._indicatorShape.position=[0,(this.dataRangeOption.max-b)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._calculableLocation.height],this._indicatorShape.style.text=this._textFormat(a.value),this._indicatorShape.style.color=this.getColor(b),this.zr.addHoverShape(this._indicatorShape)}},_textFormat:function(a,b){var c=this.dataRangeOption;if(a!==-Number.MAX_VALUE&&(a=(+a).toFixed(c.precision)),null!=b&&b!==Number.MAX_VALUE&&(b=(+b).toFixed(c.precision)),c.formatter){if("string"==typeof c.formatter)return c.formatter.replace("{value}",a===-Number.MAX_VALUE?"min":a).replace("{value2}",b===Number.MAX_VALUE?"max":b);if("function"==typeof c.formatter)return c.formatter.call(this.myChart,a,b)}return null==b?a:a===-Number.MAX_VALUE?"< "+b:b===Number.MAX_VALUE?"> "+a:a+" - "+b},_isContinuity:function(){var a=this.dataRangeOption;return!(a.splitList?a.splitList.length>0:a.splitNumber>0)||a.calculable},_useCustomizedSplit:function(){var a=this.dataRangeOption;return a.splitList&&a.splitList.length>0},_buildColorList:function(a){if(this._colorList=k.getGradientColors(this.dataRangeOption.color,Math.max((a-this.dataRangeOption.color.length)/(this.dataRangeOption.color.length-1),0)+1),this._colorList.length>a){for(var b=this._colorList.length,c=[this._colorList[0]],d=b/(a-1),e=1;a-1>e;e++)c.push(this._colorList[Math.floor(e*d)]);c.push(this._colorList[b-1]),this._colorList=c}if(this._useCustomizedSplit())for(var f=this._splitList,e=0,b=f.length;b>e;e++)f[e].color&&(this._colorList[e]=f[e].color)},_buildGap:function(a){if(!this._useCustomizedSplit()){var b=this.dataRangeOption.precision;for(this._gap=(this.dataRangeOption.max-this.dataRangeOption.min)/a;this._gap.toFixed(b)-0!=this._gap&&5>b;)b++;this.dataRangeOption.precision=b,this._gap=((this.dataRangeOption.max-this.dataRangeOption.min)/a).toFixed(b)-0}},_buildDataList:function(a){for(var b=this._valueTextList=[],c=this.dataRangeOption,d=this._useCustomizedSplit(),e=0;a>e;e++){this._selectedMap[e]=!0;var f="";if(d){var g=this._splitList[a-1-e];f=null!=g.label?g.label:null!=g.single?this._textFormat(g.single):this._textFormat(g.min,g.max)}else f=this._textFormat(e*this._gap+c.min,(e+1)*this._gap+c.min);b.unshift(f)}},_buildSplitList:function(){if(this._useCustomizedSplit())for(var a=this.dataRangeOption.splitList,b=this._splitList=[],c=0,d=a.length;d>c;c++){var e=a[c];if(!e||null==e.start&&null==e.end)throw new Error("Empty item exists in splitList!");var f={label:e.label,color:e.color};f.min=e.start,f.max=e.end,f.min>f.max&&(f.min=[f.max,f.max=f.min][0]),f.min===f.max&&(f.single=f.max),null==f.min&&(f.min=-Number.MAX_VALUE),null==f.max&&(f.max=Number.MAX_VALUE),b.push(f)}},refresh:function(a){if(a){this.option=a,this.option.dataRange=this.reformOption(this.option.dataRange);var b=this.dataRangeOption=this.option.dataRange;if(!this._useCustomizedSplit()&&(null==b.min||null==b.max))throw new Error("option.dataRange.min or option.dataRange.max has not been defined.");this.myChart.canvasSupported||(b.realtime=!1);var c=this._isContinuity()?100:this._useCustomizedSplit()?b.splitList.length:b.splitNumber;this._buildSplitList(),this._buildColorList(c),this._buildGap(c),this._buildDataList(c)}this.clear(),this._buildShape()},getColor:function(a){if(isNaN(a))return null;var b;if(this._useCustomizedSplit()){for(var c=this._splitList,d=0,e=c.length;e>d;d++)if(c[d].min<=a&&c[d].max>=a){b=d;break}}else{if(this.dataRangeOption.min==this.dataRangeOption.max)return this._colorList[0];if(a<this.dataRangeOption.min?a=this.dataRangeOption.min:a>this.dataRangeOption.max&&(a=this.dataRangeOption.max),this.dataRangeOption.calculable&&(a-(this._gap*this._range.start+this.dataRangeOption.min)>5e-5||a-(this._gap*this._range.end+this.dataRangeOption.min)<-5e-5))return null;b=this._colorList.length-Math.ceil((a-this.dataRangeOption.min)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._colorList.length),b==this._colorList.length&&b--}return this._selectedMap[b]?this._colorList[b]:null},getColorByIndex:function(a){return a>=this._colorList.length?a=this._colorList.length-1:0>a&&(a=0),this._colorList[a]},onbeforDispose:function(){this.messageCenter.unbind(g.EVENT.HOVER,this._onhoverlink)}},h.inherits(b,c),a("../component").define("dataRange",b),b}),define("echarts/util/shape/HandlePolygon",["require","zrender/shape/Base","zrender/shape/Polygon","zrender/tool/util"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("zrender/shape/Polygon"),e=a("zrender/tool/util");return b.prototype={type:"handle-polygon",buildPath:function(a,b){d.prototype.buildPath(a,b)},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);a=c[0],b=c[1];var d=this.style.rect;return a>=d.x&&a<=d.x+d.width&&b>=d.y&&b<=d.y+d.height?!0:!1}},e.inherits(b,c),b});