/*! myResume 2015-07-06 */
define("echarts/chart/wordCloud",["require","./base","zrender/shape/Text","../layout/WordCloud","../component/grid","../component/dataRange","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../chart"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("../layout/WordCloud");a("../component/grid"),a("../component/dataRange");var f=a("../config"),g=a("../util/ecData"),h=a("zrender/tool/util"),i=a("zrender/tool/color");return f.wordCloud={zlevel:0,z:2,clickable:!0,center:["50%","50%"],size:["40%","40%"],textRotation:[0,90],textPadding:0,autoSize:{enable:!0,minSize:12},itemStyle:{normal:{textStyle:{fontSize:function(a){return a.value}}}}},b.prototype={type:f.CHART_TYPE_WORDCLOUD,refresh:function(a){a&&(this.option=a,this.series=a.series),this._init()},_init:function(){var a=this.series;this.backupShapeList();for(var b=this.component.legend,c=0;c<a.length;c++)if(a[c].type===f.CHART_TYPE_WORDCLOUD){a[c]=this.reformOption(a[c]);var d=a[c].name||"";if(this.selectedMap[d]=b?b.isSelected(d):!0,!this.selectedMap[d])continue;this.buildMark(c),this._initSerie(a[c])}},_initSerie:function(a){var b=a.itemStyle.normal.textStyle,c=[this.parsePercent(a.size[0],this.zr.getWidth())||200,this.parsePercent(a.size[1],this.zr.getHeight())||200],d=this.parseCenter(this.zr,a.center),f={size:c,wordletype:{autoSizeCal:a.autoSize},center:d,rotate:a.textRotation,padding:a.textPadding,font:b.fontFamily,fontSize:b.fontSize,fontWeight:b.fontWeight,fontStyle:b.fontStyle,text:function(a){return a.name},data:a.data},g=new e(f),h=this;g.end(function(a){h._buildShapes(a)}),g.start()},_buildShapes:function(a){for(var b=a.length,c=0;b>c;c++)this._buildTextShape(a[c],0,c);this.addShapeList()},_buildTextShape:function(a,b,c){var e=this.series,f=e[b],h=f.name||"",j=f.data[c],k=[j,f],l=this.component.legend,m=l?l.getColor(h):this.zr.getColor(b),n=this.deepMerge(k,"itemStyle.normal")||{},o=this.deepMerge(k,"itemStyle.emphasis")||{},p=this.getItemStyleColor(n.color,b,c,j)||m,q=this.getItemStyleColor(o.color,b,c,j)||("string"==typeof p?i.lift(p,-.2):p),r=new d({zlevel:f.zlevel,z:f.z,hoverable:!0,clickable:this.deepQuery(k,"clickable"),style:{x:0,y:0,text:a.text,color:p,textFont:[a.style,a.weight,a.size+"px",a.font].join(" "),textBaseline:"alphabetic",textAlign:"center"},highlightStyle:{brushType:o.borderWidth?"both":"fill",color:q,lineWidth:o.borderWidth||0,strokeColor:o.borderColor},position:[a.x,a.y],rotation:[-a.rotate/180*Math.PI,0,0]});g.pack(r,f,b,j,c,j.name),this.shapeList.push(r)}},h.inherits(b,c),a("../chart").define("wordCloud",b),b}),define("echarts/layout/WordCloud",["require","../layout/WordCloudRectZero","zrender/tool/util"],function(a){function b(a){this._init(a)}var c=a("../layout/WordCloudRectZero"),d=a("zrender/tool/util");return b.prototype={start:function(){function a(){o.totalArea=g,m.autoSizeCal.enable&&o._autoCalTextSize(k,g,e,f,m.autoSizeCal.minSize),l.timer&&clearInterval(l.timer),l.timer=setInterval(b,0),b()}function b(){for(var a,b=+new Date,c=k.length;+new Date-b<l.timeInterval&&++h<c&&l.timer;)a=k[h],a.x=n[0]>>1,a.y=n[1]>>1,o._cloudSprite(a,k,h),a.hasText&&o._place(d,a,j)&&(i.push(a),a.x-=n[0]>>1,a.y-=n[1]>>1);h>=c&&(o.stop(),o._fixTagPosition(i),l.endcallback(i))}var d=null,e=0,f=0,g=0,h=-1,i=[],j=null,k=this.wordsdata,l=this.defaultOption,m=l.wordletype,n=l.size,o=this,p=new c({type:m.type,width:n[0],height:n[1]});return p.calculate(function(b){d=b.initarr,e=b.maxWit,f=b.maxHit,g=b.area,j=b.imgboard,a()},this),this},_fixTagPosition:function(a){for(var b=this.defaultOption.center,c=0,d=a.length;d>c;c++)a[c].x+=b[0],a[c].y+=b[1]},stop:function(){return this.defaultOption.timer&&(clearInterval(this.defaultOption.timer),this.defaultOption.timer=null),this},end:function(a){return a&&(this.defaultOption.endcallback=a),this},_init:function(a){this.defaultOption={},this._initProperty(a),this._initMethod(a),this._initCanvas(),this._initData(a.data)},_initData:function(a){var b=this,c=b.defaultOption;this.wordsdata=a.map(function(a,d){return a.text=c.text.call(b,a,d),a.font=c.font.call(b,a,d),a.style=c.fontStyle.call(b,a,d),a.weight=c.fontWeight.call(b,a,d),a.rotate=c.rotate.call(b,a,d),a.size=~~c.fontSize.call(b,a,d),a.padding=c.padding.call(b,a,d),a}).sort(function(a,b){return b.value-a.value})},_initMethod:function(a){function b(a){return a.name}function c(){return"sans-serif"}function d(){return"normal"}function e(a){return a.value}function f(){return 0}function g(a){return function(){return a[Math.round(Math.random()*(a.length-1))]}}function h(){return 0}function i(a){var b=a[0]/a[1];return function(a){return[b*(a*=.1)*Math.cos(a),a*Math.sin(a)]}}function j(a){var b=4,c=b*a[0]/a[1],d=0,e=0;return function(a){var f=0>a?-1:1;switch(Math.sqrt(1+4*f*a)-f&3){case 0:d+=c;break;case 1:e+=b;break;case 2:d-=c;break;default:e-=b}return[d,e]}}function k(a){return"function"==typeof a?a:function(){return a}}var l=this.defaultOption;l.text=a.text?k(a.text):b,l.font=a.font?k(a.font):c,l.fontSize=a.fontSize?k(a.fontSize):e,l.fontStyle=a.fontStyle?k(a.fontStyle):d,l.fontWeight=a.fontWeight?k(a.fontWeight):d,l.rotate=a.rotate?g(a.rotate):f,l.padding=a.padding?k(a.padding):h,l.center=a.center,l.spiral=i,l.endcallback=function(){},l.rectangularSpiral=j,l.archimedeanSpiral=i},_initProperty:function(a){var b=this.defaultOption;b.size=a.size||[256,256],b.wordletype=a.wordletype,b.words=a.words||[],b.timeInterval=1/0,b.timer=null,b.spirals={archimedean:b.archimedeanSpiral,rectangular:b.rectangularSpiral},d.merge(b,{size:[256,256],wordletype:{type:"RECT",areaPresent:.058,autoSizeCal:{enable:!0,minSize:12}}})},_initCanvas:function(){var a,b=Math.PI/180,c=64,d=2048,e=1;"undefined"!=typeof document?(a=document.createElement("canvas"),a.width=1,a.height=1,e=Math.sqrt(a.getContext("2d").getImageData(0,0,1,1).data.length>>2),a.width=(c<<5)/e,a.height=d/e):a=new Canvas(c<<5,d);var f=a.getContext("2d");f.fillStyle=f.strokeStyle="red",f.textAlign="center",this.defaultOption.c=f,this.defaultOption.cw=c,this.defaultOption.ch=d,this.defaultOption.ratio=e,this.defaultOption.cloudRadians=b},_cloudSprite:function(a,b,c){if(!a.sprite){var d=this.defaultOption.cw,e=this.defaultOption.ch,f=this.defaultOption.c,g=this.defaultOption.ratio,h=this.defaultOption.cloudRadians;f.clearRect(0,0,(d<<5)/g,e/g);var i=0,j=0,k=0,l=b.length;for(--c;++c<l;){a=b[c],f.save(),f.font=a.style+" "+a.weight+" "+~~((a.size+1)/g)+"px "+a.font;var m=f.measureText(a.text+"m").width*g,n=a.size<<1;if(a.rotate){var o=Math.sin(a.rotate*h),p=Math.cos(a.rotate*h),q=m*p,r=m*o,s=n*p,t=n*o;m=Math.max(Math.abs(q+t),Math.abs(q-t))+31>>5<<5,n=~~Math.max(Math.abs(r+s),Math.abs(r-s))}else m=m+31>>5<<5;if(n>k&&(k=n),i+m>=d<<5&&(i=0,j+=k,k=0),j+n>=e)break;f.translate((i+(m>>1))/g,(j+(n>>1))/g),a.rotate&&f.rotate(a.rotate*h),f.fillText(a.text,0,0),a.padding&&(f.lineWidth=2*a.padding,f.strokeText(a.text,0,0)),f.restore(),a.width=m,a.height=n,a.xoff=i,a.yoff=j,a.x1=m>>1,a.y1=n>>1,a.x0=-a.x1,a.y0=-a.y1,a.hasText=!0,i+=m}for(var u=f.getImageData(0,0,(d<<5)/g,e/g).data,v=[];--c>=0;)if(a=b[c],a.hasText){for(var m=a.width,w=m>>5,n=a.y1-a.y0,x=0;n*w>x;x++)v[x]=0;if(i=a.xoff,null==i)return;j=a.yoff;for(var y=0,z=-1,A=0;n>A;A++){for(var x=0;m>x;x++){var B=w*A+(x>>5),C=u[(j+A)*(d<<5)+(i+x)<<2]?1<<31-x%32:0;v[B]|=C,y|=C}y?z=A:(a.y0++,n--,A--,j++)}a.y1=a.y0+z,a.sprite=v.slice(0,(a.y1-a.y0)*w)}}},_place:function(a,b,c){function d(a,b,c){c>>=5;for(var d,e=a.sprite,f=a.width>>5,g=a.x-(f<<4),h=127&g,i=32-h,j=a.y1-a.y0,k=(a.y+a.y0)*c+(g>>5),l=0;j>l;l++){d=0;for(var m=0;f>=m;m++)if((d<<i|(f>m?(d=e[l*f+m])>>>h:0))&b[k+m])return!0;k+=c}return!1}function e(a,b){return b.row[a.y]&&b.cloumn[a.x]&&a.x>=b.row[a.y].start&&a.x<=b.row[a.y].end&&a.y>=b.cloumn[a.x].start&&a.y<=b.cloumn[a.x].end}for(var f,g,h,i=this.defaultOption.size,j=([{x:0,y:0},{x:i[0],y:i[1]}],b.x),k=b.y,l=Math.sqrt(i[0]*i[0]+i[1]*i[1]),m=this.defaultOption.spiral(i),n=Math.random()<.5?1:-1,o=-n;(f=m(o+=n))&&(g=~~f[0],h=~~f[1],!(Math.min(g,h)>l));)if(b.x=j+g,b.y=k+h,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>i[0]||b.y+b.y1>i[1])&&!d(b,a,i[0])&&e(b,c)){for(var p,q=b.sprite,r=b.width>>5,s=i[0]>>5,t=b.x-(r<<4),u=127&t,v=32-u,w=b.y1-b.y0,x=(b.y+b.y0)*s+(t>>5),y=0;w>y;y++){p=0;for(var z=0;r>=z;z++)a[x+z]|=p<<v|(r>z?(p=q[y*r+z])>>>u:0);x+=s}return delete b.sprite,!0}return!1},_autoCalTextSize:function(a,b,c,d,e){function f(a){p.clearRect(0,0,(n<<5)/q,o/q),p.save(),p.font=a.style+" "+a.weight+" "+~~((a.size+1)/q)+"px "+a.font;var b=p.measureText(a.text+"m").width*q,g=a.size<<1;b=b+31>>5<<5,p.restore(),a.aw=b,a.ah=g;var h,i,j;if(a.rotate){var k=Math.sin(a.rotate*r),l=Math.cos(a.rotate*r),s=b*l,t=b*k,u=g*l,v=g*k;i=Math.max(Math.abs(s+v),Math.abs(s-v))+31>>5<<5,j=~~Math.max(Math.abs(t+u),Math.abs(t-u))}return a.size<=m||a.rotate&&b*g<=a.area&&c>=i&&d>=j||b*g<=a.area&&c>=b&&d>=g?void(a.area=b*g):(h=a.rotate&&i>c&&j>d?Math.min(c/i,d/j):b>c||g>d?Math.min(c/b,d/g):Math.sqrt(a.area/(a.aw*a.ah)),a.size=~~(h*a.size),a.size<e?void(a.size=e):f(a))}function g(a,b){for(var c=a.length,d=0;c--;)d+=b(a[c]);return d}for(var h,i,j=g(a,function(a){return a.size}),k=a.length,l=.25,m=e,n=this.defaultOption.cw,o=this.defaultOption.ch,p=this.defaultOption.c,q=this.defaultOption.ratio,r=this.defaultOption.cloudRadians;k--;)h=a[k],i=h.size/j,l?h.areapre=l>i?i:l:h.areapre=i,h.area=b*h.areapre,h.totalarea=b,f(h)}},b}),define("echarts/component/dataRange",["require","./base","zrender/shape/Text","zrender/shape/Rectangle","../util/shape/HandlePolygon","../config","zrender/tool/util","zrender/tool/event","zrender/tool/area","zrender/tool/color","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f);var h=this;h._ondrift=function(a,b){return h.__ondrift(this,a,b)},h._ondragend=function(){return h.__ondragend()},h._dataRangeSelected=function(a){return h.__dataRangeSelected(a)},h._dispatchHoverLink=function(a){return h.__dispatchHoverLink(a)},h._onhoverlink=function(a){return h.__onhoverlink(a)},this._selectedMap={},this._range={},this.refresh(e),b.bind(g.EVENT.HOVER,this._onhoverlink)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Rectangle"),f=a("../util/shape/HandlePolygon"),g=a("../config");g.dataRange={zlevel:0,z:4,show:!0,orient:"vertical",x:"left",y:"bottom",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemWidth:20,itemHeight:14,precision:0,splitNumber:5,splitList:null,calculable:!1,selectedMode:!0,hoverLink:!0,realtime:!0,color:["#006edd","#e0ffff"],textStyle:{color:"#333"}};var h=a("zrender/tool/util"),i=a("zrender/tool/event"),j=a("zrender/tool/area"),k=a("zrender/tool/color");return b.prototype={type:g.COMPONENT_TYPE_DATARANGE,_textGap:10,_buildShape:function(){if(this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._isContinuity()?this._buildGradient():this._buildItem(),this.dataRangeOption.show)for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a]);this._syncShapeFromRange()},_buildItem:function(){var a,b,c,f,g=this._valueTextList,h=g.length,i=this.getFont(this.dataRangeOption.textStyle),k=this._itemGroupLocation.x,l=this._itemGroupLocation.y,m=this.dataRangeOption.itemWidth,n=this.dataRangeOption.itemHeight,o=this.dataRangeOption.itemGap,p=j.getTextHeight("国",i);"vertical"==this.dataRangeOption.orient&&"right"==this.dataRangeOption.x&&(k=this._itemGroupLocation.x+this._itemGroupLocation.width-m);var q=!0;this.dataRangeOption.text&&(q=!1,this.dataRangeOption.text[0]&&(c=this._getTextShape(k,l,this.dataRangeOption.text[0]),"horizontal"==this.dataRangeOption.orient?k+=j.getTextWidth(this.dataRangeOption.text[0],i)+this._textGap:(l+=p+this._textGap,c.style.y+=p/2+this._textGap,c.style.textBaseline="bottom"),this.shapeList.push(new d(c))));for(var r=0;h>r;r++)a=g[r],f=this.getColorByIndex(r),b=this._getItemShape(k,l,m,n,this._selectedMap[r]?f:"#ccc"),b._idx=r,b.onmousemove=this._dispatchHoverLink,this.dataRangeOption.selectedMode&&(b.clickable=!0,b.onclick=this._dataRangeSelected),this.shapeList.push(new e(b)),q&&(c={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:k+m+5,y:l,color:this._selectedMap[r]?this.dataRangeOption.textStyle.color:"#ccc",text:g[r],textFont:i,textBaseline:"top"},highlightStyle:{brushType:"fill"}},"vertical"==this.dataRangeOption.orient&&"right"==this.dataRangeOption.x&&(c.style.x-=m+10,c.style.textAlign="right"),c._idx=r,c.onmousemove=this._dispatchHoverLink,this.dataRangeOption.selectedMode&&(c.clickable=!0,c.onclick=this._dataRangeSelected),this.shapeList.push(new d(c))),"horizontal"==this.dataRangeOption.orient?k+=m+(q?5:0)+(q?j.getTextWidth(a,i):0)+o:l+=n+o;!q&&this.dataRangeOption.text[1]&&("horizontal"==this.dataRangeOption.orient?k=k-o+this._textGap:l=l-o+this._textGap,c=this._getTextShape(k,l,this.dataRangeOption.text[1]),"horizontal"!=this.dataRangeOption.orient&&(c.style.y-=5,c.style.textBaseline="top"),this.shapeList.push(new d(c)))},_buildGradient:function(){var b,c,f=this.getFont(this.dataRangeOption.textStyle),g=this._itemGroupLocation.x,h=this._itemGroupLocation.y,i=this.dataRangeOption.itemWidth,k=this.dataRangeOption.itemHeight,l=j.getTextHeight("国",f),m=10,n=!0;this.dataRangeOption.text&&(n=!1,this.dataRangeOption.text[0]&&(c=this._getTextShape(g,h,this.dataRangeOption.text[0]),"horizontal"==this.dataRangeOption.orient?g+=j.getTextWidth(this.dataRangeOption.text[0],f)+this._textGap:(h+=l+this._textGap,c.style.y+=l/2+this._textGap,c.style.textBaseline="bottom"),this.shapeList.push(new d(c))));for(var o=a("zrender/tool/color"),p=1/(this.dataRangeOption.color.length-1),q=[],r=0,s=this.dataRangeOption.color.length;s>r;r++)q.push([r*p,this.dataRangeOption.color[r]]);"horizontal"==this.dataRangeOption.orient?(b={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:g,y:h,width:i*m,height:k,color:o.getLinearGradient(g,h,g+i*m,h,q)},hoverable:!1},g+=i*m+this._textGap):(b={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:g,y:h,width:i,height:k*m,color:o.getLinearGradient(g,h,g,h+k*m,q)},hoverable:!1},h+=k*m+this._textGap),this.shapeList.push(new e(b)),this._calculableLocation=b.style,this.dataRangeOption.calculable&&(this._buildFiller(),this._bulidMask(),this._bulidHandle()),this._buildIndicator(),!n&&this.dataRangeOption.text[1]&&(c=this._getTextShape(g,h,this.dataRangeOption.text[1]),this.shapeList.push(new d(c)))},_buildIndicator:function(){var a,b,c=this._calculableLocation.x,d=this._calculableLocation.y,e=this._calculableLocation.width,g=this._calculableLocation.height,h=5;"horizontal"==this.dataRangeOption.orient?"bottom"!=this.dataRangeOption.y?(a=[[c,d+g],[c-h,d+g+h],[c+h,d+g+h]],b="bottom"):(a=[[c,d],[c-h,d-h],[c+h,d-h]],b="top"):"right"!=this.dataRangeOption.x?(a=[[c+e,d],[c+e+h,d-h],[c+e+h,d+h]],b="right"):(a=[[c,d],[c-h,d-h],[c-h,d+h]],b="left"),this._indicatorShape={style:{pointList:a,color:"#fff",__rect:{x:Math.min(a[0][0],a[1][0]),y:Math.min(a[0][1],a[1][1]),width:h*("horizontal"==this.dataRangeOption.orient?2:1),height:h*("horizontal"==this.dataRangeOption.orient?1:2)}},highlightStyle:{brushType:"fill",textPosition:b,textColor:this.dataRangeOption.textStyle.color},hoverable:!1},this._indicatorShape=new f(this._indicatorShape)},_buildFiller:function(){this._fillerShape={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:this._calculableLocation.x,y:this._calculableLocation.y,width:this._calculableLocation.width,height:this._calculableLocation.height,color:"rgba(255,255,255,0)"},highlightStyle:{strokeColor:"rgba(255,255,255,0.5)",lineWidth:1},draggable:!0,ondrift:this._ondrift,ondragend:this._ondragend,onmousemove:this._dispatchHoverLink,_type:"filler"},this._fillerShape=new e(this._fillerShape),this.shapeList.push(this._fillerShape)},_bulidHandle:function(){var a,b,c,d,e,g,h,i,k=this._calculableLocation.x,l=this._calculableLocation.y,m=this._calculableLocation.width,n=this._calculableLocation.height,o=this.getFont(this.dataRangeOption.textStyle),p=j.getTextHeight("国",o),q=Math.max(j.getTextWidth(this._textFormat(this.dataRangeOption.max),o),j.getTextWidth(this._textFormat(this.dataRangeOption.min),o))+2;"horizontal"==this.dataRangeOption.orient?"bottom"!=this.dataRangeOption.y?(a=[[k,l],[k,l+n+p],[k-p,l+n+p],[k-1,l+n],[k-1,l]],b=k-q/2-p,c=l+n+p/2+2,d={x:k-q-p,y:l+n,width:q+p,height:p},e=[[k+m,l],[k+m,l+n+p],[k+m+p,l+n+p],[k+m+1,l+n],[k+m+1,l]],g=k+m+q/2+p,h=c,i={x:k+m,y:l+n,width:q+p,height:p}):(a=[[k,l+n],[k,l-p],[k-p,l-p],[k-1,l],[k-1,l+n]],b=k-q/2-p,c=l-p/2-2,d={x:k-q-p,y:l-p,width:q+p,height:p},e=[[k+m,l+n],[k+m,l-p],[k+m+p,l-p],[k+m+1,l],[k+m+1,l+n]],g=k+m+q/2+p,h=c,i={x:k+m,y:l-p,width:q+p,height:p}):(q+=p,"right"!=this.dataRangeOption.x?(a=[[k,l],[k+m+p,l],[k+m+p,l-p],[k+m,l-1],[k,l-1]],b=k+m+q/2+p/2,c=l-p/2,d={x:k+m,y:l-p,width:q+p,height:p},e=[[k,l+n],[k+m+p,l+n],[k+m+p,l+p+n],[k+m,l+1+n],[k,l+n+1]],g=b,h=l+n+p/2,i={x:k+m,y:l+n,width:q+p,height:p}):(a=[[k+m,l],[k-p,l],[k-p,l-p],[k,l-1],[k+m,l-1]],b=k-q/2-p/2,c=l-p/2,d={x:k-q-p,y:l-p,width:q+p,height:p},e=[[k+m,l+n],[k-p,l+n],[k-p,l+p+n],[k,l+1+n],[k+m,l+n+1]],g=b,h=l+n+p/2,i={x:k-q-p,y:l+n,width:q+p,height:p})),this._startShape={style:{pointList:a,text:this._textFormat(this.dataRangeOption.max),textX:b,textY:c,textFont:o,color:this.getColor(this.dataRangeOption.max),rect:d,x:a[0][0],y:a[0][1],_x:a[0][0],_y:a[0][1]}},this._startShape.highlightStyle={strokeColor:this._startShape.style.color,lineWidth:1},this._endShape={style:{pointList:e,text:this._textFormat(this.dataRangeOption.min),textX:g,textY:h,textFont:o,color:this.getColor(this.dataRangeOption.min),rect:i,x:e[0][0],y:e[0][1],_x:e[0][0],_y:e[0][1]}},this._endShape.highlightStyle={strokeColor:this._endShape.style.color,lineWidth:1},this._startShape.zlevel=this._endShape.zlevel=this.getZlevelBase(),this._startShape.z=this._endShape.z=this.getZBase()+1,this._startShape.draggable=this._endShape.draggable=!0,this._startShape.ondrift=this._endShape.ondrift=this._ondrift,this._startShape.ondragend=this._endShape.ondragend=this._ondragend,this._startShape.style.textColor=this._endShape.style.textColor=this.dataRangeOption.textStyle.color,this._startShape.style.textAlign=this._endShape.style.textAlign="center",this._startShape.style.textPosition=this._endShape.style.textPosition="specific",this._startShape.style.textBaseline=this._endShape.style.textBaseline="middle",this._startShape.style.width=this._endShape.style.width=0,this._startShape.style.height=this._endShape.style.height=0,this._startShape.style.textPosition=this._endShape.style.textPosition="specific",this._startShape=new f(this._startShape),this._endShape=new f(this._endShape),this.shapeList.push(this._startShape),this.shapeList.push(this._endShape)},_bulidMask:function(){var a=this._calculableLocation.x,b=this._calculableLocation.y,c=this._calculableLocation.width,d=this._calculableLocation.height;this._startMask={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:a,y:b,width:"horizontal"==this.dataRangeOption.orient?0:c,height:"horizontal"==this.dataRangeOption.orient?d:0,color:"#ccc"},hoverable:!1},this._endMask={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:"horizontal"==this.dataRangeOption.orient?a+c:a,y:"horizontal"==this.dataRangeOption.orient?b:b+d,width:"horizontal"==this.dataRangeOption.orient?0:c,height:"horizontal"==this.dataRangeOption.orient?d:0,color:"#ccc"},hoverable:!1},this._startMask=new e(this._startMask),this._endMask=new e(this._endMask),this.shapeList.push(this._startMask),this.shapeList.push(this._endMask)},_buildBackground:function(){var a=this.reformCssArray(this.dataRangeOption.padding);this.shapeList.push(new e({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-a[3],y:this._itemGroupLocation.y-a[0],width:this._itemGroupLocation.width+a[3]+a[1],height:this._itemGroupLocation.height+a[0]+a[2],brushType:0===this.dataRangeOption.borderWidth?"fill":"both",color:this.dataRangeOption.backgroundColor,strokeColor:this.dataRangeOption.borderColor,lineWidth:this.dataRangeOption.borderWidth}}))},_getItemGroupLocation:function(){var a=this._valueTextList,b=a.length,c=this.dataRangeOption.itemGap,d=this.dataRangeOption.itemWidth,e=this.dataRangeOption.itemHeight,f=0,g=0,h=this.getFont(this.dataRangeOption.textStyle),i=j.getTextHeight("国",h),k=10;if("horizontal"==this.dataRangeOption.orient){if(this.dataRangeOption.text||this._isContinuity())f=(this._isContinuity()?d*k+c:b*(d+c))+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[0]?j.getTextWidth(this.dataRangeOption.text[0],h)+this._textGap:0)+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[1]?j.getTextWidth(this.dataRangeOption.text[1],h)+this._textGap:0);else{d+=5;for(var l=0;b>l;l++)f+=d+j.getTextWidth(a[l],h)+c}f-=c,g=Math.max(i,e)}else{var m;if(this.dataRangeOption.text||this._isContinuity())g=(this._isContinuity()?e*k+c:b*(e+c))+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[0]?this._textGap+i:0)+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[1]?this._textGap+i:0),m=Math.max(j.getTextWidth(this.dataRangeOption.text&&this.dataRangeOption.text[0]||"",h),j.getTextWidth(this.dataRangeOption.text&&this.dataRangeOption.text[1]||"",h)),f=Math.max(d,m);else{g=(e+c)*b,d+=5,m=0;for(var l=0;b>l;l++)m=Math.max(m,j.getTextWidth(a[l],h));f=d+m}g-=c}var n,o=this.reformCssArray(this.dataRangeOption.padding),p=this.zr.getWidth();switch(this.dataRangeOption.x){case"center":n=Math.floor((p-f)/2);break;case"left":n=o[3]+this.dataRangeOption.borderWidth;break;case"right":n=p-f-o[1]-this.dataRangeOption.borderWidth;break;default:n=this.parsePercent(this.dataRangeOption.x,p),n=isNaN(n)?0:n}var q,r=this.zr.getHeight();switch(this.dataRangeOption.y){case"top":q=o[0]+this.dataRangeOption.borderWidth;break;case"bottom":q=r-g-o[2]-this.dataRangeOption.borderWidth;break;case"center":q=Math.floor((r-g)/2);break;default:q=this.parsePercent(this.dataRangeOption.y,r),q=isNaN(q)?0:q}if(this.dataRangeOption.calculable){var s=Math.max(j.getTextWidth(this.dataRangeOption.max,h),j.getTextWidth(this.dataRangeOption.min,h))+i;"horizontal"==this.dataRangeOption.orient?(s>n&&(n=s),n+f+s>p&&(n-=s)):(i>q&&(q=i),q+g+i>r&&(q-=i))}return{x:n,y:q,width:f,height:g}},_getTextShape:function(a,b,c){return{zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:"horizontal"==this.dataRangeOption.orient?a:this._itemGroupLocation.x+this._itemGroupLocation.width/2,y:"horizontal"==this.dataRangeOption.orient?this._itemGroupLocation.y+this._itemGroupLocation.height/2:b,color:this.dataRangeOption.textStyle.color,text:c,textFont:this.getFont(this.dataRangeOption.textStyle),textBaseline:"horizontal"==this.dataRangeOption.orient?"middle":"top",textAlign:"horizontal"==this.dataRangeOption.orient?"left":"center"},hoverable:!1}},_getItemShape:function(a,b,c,d,e){return{zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:a,y:b+1,width:c,height:d-2,color:e},highlightStyle:{strokeColor:e,lineWidth:1}}},__ondrift:function(a,b,c){var d=this._calculableLocation.x,e=this._calculableLocation.y,f=this._calculableLocation.width,g=this._calculableLocation.height;return"horizontal"==this.dataRangeOption.orient?a.style.x+b<=d?a.style.x=d:a.style.x+b+a.style.width>=d+f?a.style.x=d+f-a.style.width:a.style.x+=b:a.style.y+c<=e?a.style.y=e:a.style.y+c+a.style.height>=e+g?a.style.y=e+g-a.style.height:a.style.y+=c,"filler"==a._type?this._syncHandleShape():this._syncFillerShape(a),this.dataRangeOption.realtime&&this._dispatchDataRange(),!0},__ondragend:function(){this.isDragend=!0},ondragend:function(a,b){this.isDragend&&a.target&&(b.dragOut=!0,b.dragIn=!0,this.dataRangeOption.realtime||this._dispatchDataRange(),b.needRefresh=!1,this.isDragend=!1)},_syncShapeFromRange:function(){var a=this.dataRangeOption.range||{},b=a.start,c=a.end;if(b>c&&(b=[c,c=b][0]),this._range.end=null!=b?b:null!=this._range.end?this._range.end:0,this._range.start=null!=c?c:null!=this._range.start?this._range.start:100,100!=this._range.start||0!==this._range.end){if("horizontal"==this.dataRangeOption.orient){var d=this._fillerShape.style.width;this._fillerShape.style.x+=d*(100-this._range.start)/100,this._fillerShape.style.width=d*(this._range.start-this._range.end)/100}else{var e=this._fillerShape.style.height;this._fillerShape.style.y+=e*(100-this._range.start)/100,this._fillerShape.style.height=e*(this._range.start-this._range.end)/100}this.zr.modShape(this._fillerShape.id),this._syncHandleShape()}},_syncHandleShape:function(){var a=this._calculableLocation.x,b=this._calculableLocation.y,c=this._calculableLocation.width,d=this._calculableLocation.height;"horizontal"==this.dataRangeOption.orient?(this._startShape.style.x=this._fillerShape.style.x,this._startMask.style.width=this._startShape.style.x-a,this._endShape.style.x=this._fillerShape.style.x+this._fillerShape.style.width,this._endMask.style.x=this._endShape.style.x,this._endMask.style.width=a+c-this._endShape.style.x,this._range.start=Math.ceil(100-(this._startShape.style.x-a)/c*100),this._range.end=Math.floor(100-(this._endShape.style.x-a)/c*100)):(this._startShape.style.y=this._fillerShape.style.y,this._startMask.style.height=this._startShape.style.y-b,this._endShape.style.y=this._fillerShape.style.y+this._fillerShape.style.height,this._endMask.style.y=this._endShape.style.y,this._endMask.style.height=b+d-this._endShape.style.y,this._range.start=Math.ceil(100-(this._startShape.style.y-b)/d*100),this._range.end=Math.floor(100-(this._endShape.style.y-b)/d*100)),this._syncShape()},_syncFillerShape:function(a){var b,c,d=this._calculableLocation.x,e=this._calculableLocation.y,f=this._calculableLocation.width,g=this._calculableLocation.height;"horizontal"==this.dataRangeOption.orient?(b=this._startShape.style.x,c=this._endShape.style.x,a.id==this._startShape.id&&b>=c?(c=b,this._endShape.style.x=b):a.id==this._endShape.id&&b>=c&&(b=c,this._startShape.style.x=b),this._fillerShape.style.x=b,this._fillerShape.style.width=c-b,this._startMask.style.width=b-d,this._endMask.style.x=c,this._endMask.style.width=d+f-c,this._range.start=Math.ceil(100-(b-d)/f*100),this._range.end=Math.floor(100-(c-d)/f*100)):(b=this._startShape.style.y,c=this._endShape.style.y,a.id==this._startShape.id&&b>=c?(c=b,this._endShape.style.y=b):a.id==this._endShape.id&&b>=c&&(b=c,this._startShape.style.y=b),this._fillerShape.style.y=b,this._fillerShape.style.height=c-b,this._startMask.style.height=b-e,this._endMask.style.y=c,this._endMask.style.height=e+g-c,this._range.start=Math.ceil(100-(b-e)/g*100),this._range.end=Math.floor(100-(c-e)/g*100)),this._syncShape()},_syncShape:function(){this._startShape.position=[this._startShape.style.x-this._startShape.style._x,this._startShape.style.y-this._startShape.style._y],this._startShape.style.text=this._textFormat(this._gap*this._range.start+this.dataRangeOption.min),this._startShape.style.color=this._startShape.highlightStyle.strokeColor=this.getColor(this._gap*this._range.start+this.dataRangeOption.min),this._endShape.position=[this._endShape.style.x-this._endShape.style._x,this._endShape.style.y-this._endShape.style._y],this._endShape.style.text=this._textFormat(this._gap*this._range.end+this.dataRangeOption.min),this._endShape.style.color=this._endShape.highlightStyle.strokeColor=this.getColor(this._gap*this._range.end+this.dataRangeOption.min),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.modShape(this._startMask.id),this.zr.modShape(this._endMask.id),this.zr.modShape(this._fillerShape.id),this.zr.refreshNextFrame()},_dispatchDataRange:function(){this.messageCenter.dispatch(g.EVENT.DATA_RANGE,null,{range:{start:this._range.end,end:this._range.start}},this.myChart)},__dataRangeSelected:function(a){if("single"===this.dataRangeOption.selectedMode)for(var b in this._selectedMap)this._selectedMap[b]=!1;var c=a.target._idx;this._selectedMap[c]=!this._selectedMap[c];var d,e;this._useCustomizedSplit()?(d=this._splitList[c].max,e=this._splitList[c].min):(d=(this._colorList.length-c)*this._gap+this.dataRangeOption.min,e=d-this._gap),this.messageCenter.dispatch(g.EVENT.DATA_RANGE_SELECTED,a.event,{selected:this._selectedMap,target:c,valueMax:d,valueMin:e},this.myChart),this.messageCenter.dispatch(g.EVENT.REFRESH,null,null,this.myChart)},__dispatchHoverLink:function(a){var b,c;if(this.dataRangeOption.calculable){var d,e=this.dataRangeOption.max-this.dataRangeOption.min;d="horizontal"==this.dataRangeOption.orient?(1-(i.getX(a.event)-this._calculableLocation.x)/this._calculableLocation.width)*e:(1-(i.getY(a.event)-this._calculableLocation.y)/this._calculableLocation.height)*e,b=d-.05*e,c=d+.05*e}else if(this._useCustomizedSplit()){var f=a.target._idx;c=this._splitList[f].max,b=this._splitList[f].min}else{var f=a.target._idx;c=(this._colorList.length-f)*this._gap+this.dataRangeOption.min,b=c-this._gap}this.messageCenter.dispatch(g.EVENT.DATA_RANGE_HOVERLINK,a.event,{valueMin:b,valueMax:c},this.myChart)},__onhoverlink:function(a){if(this.dataRangeOption.show&&this.dataRangeOption.hoverLink&&this._indicatorShape&&a&&null!=a.seriesIndex&&null!=a.dataIndex){var b=a.value;if(""===b||isNaN(b))return;b<this.dataRangeOption.min?b=this.dataRangeOption.min:b>this.dataRangeOption.max&&(b=this.dataRangeOption.max),"horizontal"==this.dataRangeOption.orient?this._indicatorShape.position=[(this.dataRangeOption.max-b)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._calculableLocation.width,0]:this._indicatorShape.position=[0,(this.dataRangeOption.max-b)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._calculableLocation.height],this._indicatorShape.style.text=this._textFormat(a.value),this._indicatorShape.style.color=this.getColor(b),this.zr.addHoverShape(this._indicatorShape)}},_textFormat:function(a,b){var c=this.dataRangeOption;if(a!==-Number.MAX_VALUE&&(a=(+a).toFixed(c.precision)),null!=b&&b!==Number.MAX_VALUE&&(b=(+b).toFixed(c.precision)),c.formatter){if("string"==typeof c.formatter)return c.formatter.replace("{value}",a===-Number.MAX_VALUE?"min":a).replace("{value2}",b===Number.MAX_VALUE?"max":b);if("function"==typeof c.formatter)return c.formatter.call(this.myChart,a,b)}return null==b?a:a===-Number.MAX_VALUE?"< "+b:b===Number.MAX_VALUE?"> "+a:a+" - "+b},_isContinuity:function(){var a=this.dataRangeOption;return!(a.splitList?a.splitList.length>0:a.splitNumber>0)||a.calculable},_useCustomizedSplit:function(){var a=this.dataRangeOption;return a.splitList&&a.splitList.length>0},_buildColorList:function(a){if(this._colorList=k.getGradientColors(this.dataRangeOption.color,Math.max((a-this.dataRangeOption.color.length)/(this.dataRangeOption.color.length-1),0)+1),this._colorList.length>a){for(var b=this._colorList.length,c=[this._colorList[0]],d=b/(a-1),e=1;a-1>e;e++)c.push(this._colorList[Math.floor(e*d)]);c.push(this._colorList[b-1]),this._colorList=c}if(this._useCustomizedSplit())for(var f=this._splitList,e=0,b=f.length;b>e;e++)f[e].color&&(this._colorList[e]=f[e].color)},_buildGap:function(a){if(!this._useCustomizedSplit()){var b=this.dataRangeOption.precision;for(this._gap=(this.dataRangeOption.max-this.dataRangeOption.min)/a;this._gap.toFixed(b)-0!=this._gap&&5>b;)b++;this.dataRangeOption.precision=b,this._gap=((this.dataRangeOption.max-this.dataRangeOption.min)/a).toFixed(b)-0}},_buildDataList:function(a){for(var b=this._valueTextList=[],c=this.dataRangeOption,d=this._useCustomizedSplit(),e=0;a>e;e++){this._selectedMap[e]=!0;var f="";if(d){var g=this._splitList[a-1-e];f=null!=g.label?g.label:null!=g.single?this._textFormat(g.single):this._textFormat(g.min,g.max)}else f=this._textFormat(e*this._gap+c.min,(e+1)*this._gap+c.min);b.unshift(f)}},_buildSplitList:function(){if(this._useCustomizedSplit())for(var a=this.dataRangeOption.splitList,b=this._splitList=[],c=0,d=a.length;d>c;c++){var e=a[c];if(!e||null==e.start&&null==e.end)throw new Error("Empty item exists in splitList!");var f={label:e.label,color:e.color};f.min=e.start,f.max=e.end,f.min>f.max&&(f.min=[f.max,f.max=f.min][0]),f.min===f.max&&(f.single=f.max),null==f.min&&(f.min=-Number.MAX_VALUE),
null==f.max&&(f.max=Number.MAX_VALUE),b.push(f)}},refresh:function(a){if(a){this.option=a,this.option.dataRange=this.reformOption(this.option.dataRange);var b=this.dataRangeOption=this.option.dataRange;if(!this._useCustomizedSplit()&&(null==b.min||null==b.max))throw new Error("option.dataRange.min or option.dataRange.max has not been defined.");this.myChart.canvasSupported||(b.realtime=!1);var c=this._isContinuity()?100:this._useCustomizedSplit()?b.splitList.length:b.splitNumber;this._buildSplitList(),this._buildColorList(c),this._buildGap(c),this._buildDataList(c)}this.clear(),this._buildShape()},getColor:function(a){if(isNaN(a))return null;var b;if(this._useCustomizedSplit()){for(var c=this._splitList,d=0,e=c.length;e>d;d++)if(c[d].min<=a&&c[d].max>=a){b=d;break}}else{if(this.dataRangeOption.min==this.dataRangeOption.max)return this._colorList[0];if(a<this.dataRangeOption.min?a=this.dataRangeOption.min:a>this.dataRangeOption.max&&(a=this.dataRangeOption.max),this.dataRangeOption.calculable&&(a-(this._gap*this._range.start+this.dataRangeOption.min)>5e-5||a-(this._gap*this._range.end+this.dataRangeOption.min)<-5e-5))return null;b=this._colorList.length-Math.ceil((a-this.dataRangeOption.min)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._colorList.length),b==this._colorList.length&&b--}return this._selectedMap[b]?this._colorList[b]:null},getColorByIndex:function(a){return a>=this._colorList.length?a=this._colorList.length-1:0>a&&(a=0),this._colorList[a]},onbeforDispose:function(){this.messageCenter.unbind(g.EVENT.HOVER,this._onhoverlink)}},h.inherits(b,c),a("../component").define("dataRange",b),b}),define("echarts/layout/WordCloudRectZero",["require"],function(a){function b(a){this.defaultOption={type:"RECT"},this._init(a)}return b.prototype={RECT:"_calculateRect",_init:function(a){this._initOption(a),this._initCanvas()},_initOption:function(a){for(k in a)this.defaultOption[k]=a[k]},_initCanvas:function(){var a=document.createElement("canvas");a.width=1,a.height=1;var b=Math.sqrt(a.getContext("2d").getImageData(0,0,1,1).data.length>>2);if(a.width=this.defaultOption.width,a.height=this.defaultOption.height,a.getContext)var c=a.getContext("2d");this.canvas=a,this.ctx=c,this.ratio=b},calculate:function(a,b){var c=this.defaultOption.type,d=this[c];this[d].call(this,a,b)},_calculateReturn:function(a,b,c){b.call(c,a)},_calculateRect:function(a,b){var c={},d=this.defaultOption.width>>5<<5,e=this.defaultOption.height;c.initarr=this._rectZeroArray(d*e),c.area=d*e,c.maxHit=e,c.maxWit=d,c.imgboard=this._rectBoard(d,e),this._calculateReturn(c,a,b)},_rectBoard:function(a,b){for(var c=[],d=0;b>d;d++)c.push({y:d,start:0,end:a});for(var e=[],d=0;a>d;d++)e.push({x:d,start:0,end:b});return{row:c,cloumn:e}},_rectZeroArray:function(a){for(var b=[],c=a,d=-1;++d<c;)b[d]=0;return b}},b}),define("echarts/util/shape/HandlePolygon",["require","zrender/shape/Base","zrender/shape/Polygon","zrender/tool/util"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("zrender/shape/Polygon"),e=a("zrender/tool/util");return b.prototype={type:"handle-polygon",buildPath:function(a,b){d.prototype.buildPath(a,b)},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);a=c[0],b=c[1];var d=this.style.rect;return a>=d.x&&a<=d.x+d.width&&b>=d.y&&b<=d.y+d.height?!0:!1}},e.inherits(b,c),b});