/*! myResume 2015-07-06 */
define("echarts/chart/venn",["require","./base","zrender/shape/Text","zrender/shape/Circle","zrender/shape/Path","../config","../util/ecData","zrender/tool/util","../chart"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Circle"),f=a("zrender/shape/Path"),g=a("../config");g.venn={zlevel:0,z:1,calculable:!1};var h=a("../util/ecData"),i=a("zrender/tool/util");return b.prototype={type:g.CHART_TYPE_VENN,_buildShape:function(){this.selectedMap={},this._symbol=this.option.symbolList,this._queryTarget,this._dropBoxList=[],this._vennDataCounter=0;for(var a=this.series,b=this.component.legend,c=0;c<a.length;c++)if(a[c].type===g.CHART_TYPE_VENN){a[c]=this.reformOption(a[c]);var d=a[c].name||"";if(this.selectedMap[d]=b?b.isSelected(d):!0,!this.selectedMap[d])continue;this._buildVenn(c)}this.addShapeList()},_buildVenn:function(a){var b,c,d=this.series[a],e=d.data;e[0].value>e[1].value?(b=this.zr.getHeight()/3,c=b*Math.sqrt(e[1].value)/Math.sqrt(e[0].value)):(c=this.zr.getHeight()/3,b=c*Math.sqrt(e[0].value)/Math.sqrt(e[1].value));var f=this.zr.getWidth()/2-b,g=(b+c)/2*Math.sqrt(e[2].value)/Math.sqrt((e[0].value+e[1].value)/2),h=b+c;0!==e[2].value&&(h=this._getCoincideLength(e[0].value,e[1].value,e[2].value,b,c,g,Math.abs(b-c),b+c));var i=f+h,j=this.zr.getHeight()/2;if(this._buildItem(a,0,e[0],f,j,b),this._buildItem(a,1,e[1],i,j,c),0!==e[2].value&&e[2].value!==e[0].value&&e[2].value!==e[1].value){var k=(b*b-c*c)/(2*h)+h/2,l=h/2-(b*b-c*c)/(2*h),m=Math.sqrt(b*b-k*k),n=0,o=0;e[0].value>e[1].value&&f+k>i&&(o=1),e[0].value<e[1].value&&f+l>i&&(n=1),this._buildCoincideItem(a,2,e[2],f+k,j-m,j+m,b,c,n,o)}},_getCoincideLength:function(a,b,c,d,e,f,g,h){var i=(d*d-e*e)/(2*f)+f/2,j=f/2-(d*d-e*e)/(2*f),k=Math.acos(i/d),l=Math.acos(j/e),m=d*d*Math.PI,n=k*d*d-i*d*Math.sin(k)+l*e*e-j*e*Math.sin(l),o=n/m,p=c/a,q=Math.abs(o/p);return q>.999&&1.001>q?f:.999>=q?(h=f,f=(f+g)/2,this._getCoincideLength(a,b,c,d,e,f,g,h)):(g=f,f=(f+h)/2,this._getCoincideLength(a,b,c,d,e,f,g,h))},_buildItem:function(a,b,c,d,e,f){var g=this.series,i=g[a],j=this.getCircle(a,b,c,d,e,f);if(h.pack(j,i,a,c,b,c.name),this.shapeList.push(j),i.itemStyle.normal.label.show){var k=this.getLabel(a,b,c,d,e,f);h.pack(k,i,a,i.data[b],b,i.data[b].name),this.shapeList.push(k)}},_buildCoincideItem:function(a,b,c,d,e,g,i,j,k,l){var m=this.series,n=m[a],o=[c,n],p=this.deepMerge(o,"itemStyle.normal")||{},q=this.deepMerge(o,"itemStyle.emphasis")||{},r=p.color||this.zr.getColor(b),s=q.color||this.zr.getColor(b),t="M"+d+","+e+"A"+i+","+i+",0,"+k+",1,"+d+","+g+"A"+j+","+j+",0,"+l+",1,"+d+","+e,u={color:r,path:t},v={zlevel:n.zlevel,z:n.z,style:u,highlightStyle:{color:s,lineWidth:q.borderWidth,strokeColor:q.borderColor}};v=new f(v),v.buildPathArray&&(v.style.pathArray=v.buildPathArray(u.path)),h.pack(v,m[a],0,c,b,c.name),this.shapeList.push(v)},getCircle:function(a,b,c,d,f,g){var h=this.series[a],i=[c,h],j=this.deepMerge(i,"itemStyle.normal")||{},k=this.deepMerge(i,"itemStyle.emphasis")||{},l=j.color||this.zr.getColor(b),m=k.color||this.zr.getColor(b),n={zlevel:h.zlevel,z:h.z,clickable:!0,style:{x:d,y:f,r:g,brushType:"fill",opacity:1,color:l},highlightStyle:{color:m,lineWidth:k.borderWidth,strokeColor:k.borderColor}};return this.deepQuery([c,h,this.option],"calculable")&&(this.setCalculable(n),n.draggable=!0),new e(n)},getLabel:function(a,b,c,e,f,g){var h=this.series[a],i=h.itemStyle,j=[c,h],k=this.deepMerge(j,"itemStyle.normal")||{},l="normal",m=i[l].label,n=m.textStyle||{},o=this.getLabelText(b,c,l),p=this.getFont(n),q=k.color||this.zr.getColor(b),r=n.fontSize||12,s={zlevel:h.zlevel,z:h.z,style:{x:e,y:f-g-r,color:n.color||q,text:o,textFont:p,textAlign:"center"}};return new d(s)},getLabelText:function(a,b,c){var d=this.series,e=d[0],f=this.deepQuery([b,e],"itemStyle."+c+".label.formatter");return f?"function"==typeof f?f(e.name,b.name,b.value):"string"==typeof f?(f=f.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}"),f=f.replace("{a0}",e.name).replace("{b0}",b.name).replace("{c0}",b.value)):void 0:b.name},refresh:function(a){a&&(this.option=a,this.series=a.series),this._buildShape()}},i.inherits(b,c),a("../chart").define("venn",b),b}),define("zrender/shape/Path",["require","./Base","./util/PathProxy","../tool/util"],function(a){var b=a("./Base"),c=a("./util/PathProxy"),d=c.PathSegment,e=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])},f=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(e(a)*e(b))},g=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(f(a,b))},h=function(a){b.call(this,a)};return h.prototype={type:"path",buildPathArray:function(a,b,c){if(!a)return[];b=b||0,c=c||0;var e=a,f=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(/-/g," -"),e=e.replace(/  /g," "),e=e.replace(/ /g,","),e=e.replace(/,,/g,",");var g;for(g=0;g<f.length;g++)e=e.replace(new RegExp(f[g],"g"),"|"+f[g]);var h=e.split("|"),i=[],j=0,k=0;for(g=1;g<h.length;g++){var l=h[g],m=l.charAt(0);l=l.slice(1),l=l.replace(new RegExp("e,-","g"),"e-");var n=l.split(",");n.length>0&&""===n[0]&&n.shift();for(var o=0;o<n.length;o++)n[o]=parseFloat(n[o]);for(;n.length>0&&!isNaN(n[0]);){var p,q,r,s,t,u,v,w,x=null,y=[],z=j,A=k;switch(m){case"l":j+=n.shift(),k+=n.shift(),x="L",y.push(j,k);break;case"L":j=n.shift(),k=n.shift(),y.push(j,k);break;case"m":j+=n.shift(),k+=n.shift(),x="M",y.push(j,k),m="l";break;case"M":j=n.shift(),k=n.shift(),x="M",y.push(j,k),m="L";break;case"h":j+=n.shift(),x="L",y.push(j,k);break;case"H":j=n.shift(),x="L",y.push(j,k);break;case"v":k+=n.shift(),x="L",y.push(j,k);break;case"V":k=n.shift(),x="L",y.push(j,k);break;case"C":y.push(n.shift(),n.shift(),n.shift(),n.shift()),j=n.shift(),k=n.shift(),y.push(j,k);break;case"c":y.push(j+n.shift(),k+n.shift(),j+n.shift(),k+n.shift()),j+=n.shift(),k+=n.shift(),x="C",y.push(j,k);break;case"S":p=j,q=k,r=i[i.length-1],"C"===r.command&&(p=j+(j-r.points[2]),q=k+(k-r.points[3])),y.push(p,q,n.shift(),n.shift()),j=n.shift(),k=n.shift(),x="C",y.push(j,k);break;case"s":p=j,q=k,r=i[i.length-1],"C"===r.command&&(p=j+(j-r.points[2]),q=k+(k-r.points[3])),y.push(p,q,j+n.shift(),k+n.shift()),j+=n.shift(),k+=n.shift(),x="C",y.push(j,k);break;case"Q":y.push(n.shift(),n.shift()),j=n.shift(),k=n.shift(),y.push(j,k);break;case"q":y.push(j+n.shift(),k+n.shift()),j+=n.shift(),k+=n.shift(),x="Q",y.push(j,k);break;case"T":p=j,q=k,r=i[i.length-1],"Q"===r.command&&(p=j+(j-r.points[0]),q=k+(k-r.points[1])),j=n.shift(),k=n.shift(),x="Q",y.push(p,q,j,k);break;case"t":p=j,q=k,r=i[i.length-1],"Q"===r.command&&(p=j+(j-r.points[0]),q=k+(k-r.points[1])),j+=n.shift(),k+=n.shift(),x="Q",y.push(p,q,j,k);break;case"A":s=n.shift(),t=n.shift(),u=n.shift(),v=n.shift(),w=n.shift(),z=j,A=k,j=n.shift(),k=n.shift(),x="A",y=this._convertPoint(z,A,j,k,v,w,s,t,u);break;case"a":s=n.shift(),t=n.shift(),u=n.shift(),v=n.shift(),w=n.shift(),z=j,A=k,j+=n.shift(),k+=n.shift(),x="A",y=this._convertPoint(z,A,j,k,v,w,s,t,u)}for(var B=0,C=y.length;C>B;B+=2)y[B]+=b,y[B+1]+=c;i.push(new d(x||m,y))}("z"===m||"Z"===m)&&i.push(new d("z",[]))}return i},_convertPoint:function(a,b,c,d,e,h,i,j,k){var l=k*(Math.PI/180),m=Math.cos(l)*(a-c)/2+Math.sin(l)*(b-d)/2,n=-1*Math.sin(l)*(a-c)/2+Math.cos(l)*(b-d)/2,o=m*m/(i*i)+n*n/(j*j);o>1&&(i*=Math.sqrt(o),j*=Math.sqrt(o));var p=Math.sqrt((i*i*j*j-i*i*n*n-j*j*m*m)/(i*i*n*n+j*j*m*m));e===h&&(p*=-1),isNaN(p)&&(p=0);var q=p*i*n/j,r=p*-j*m/i,s=(a+c)/2+Math.cos(l)*q-Math.sin(l)*r,t=(b+d)/2+Math.sin(l)*q+Math.cos(l)*r,u=g([1,0],[(m-q)/i,(n-r)/j]),v=[(m-q)/i,(n-r)/j],w=[(-1*m-q)/i,(-1*n-r)/j],x=g(v,w);return f(v,w)<=-1&&(x=Math.PI),f(v,w)>=1&&(x=0),0===h&&x>0&&(x-=2*Math.PI),1===h&&0>x&&(x+=2*Math.PI),[s,t,i,j,u,x,l,h]},buildPath:function(a,b){var c=b.path,d=b.x||0,e=b.y||0;b.pathArray=b.pathArray||this.buildPathArray(c,d,e);for(var f=b.pathArray,g=b.pointList=[],h=[],i=0,j=f.length;j>i;i++){"M"==f[i].command.toUpperCase()&&(h.length>0&&g.push(h),h=[]);for(var k=f[i].points,l=0,m=k.length;m>l;l+=2)h.push([k[l],k[l+1]])}h.length>0&&g.push(h);for(var i=0,j=f.length;j>i;i++){var n=f[i].command,k=f[i].points;switch(n){case"L":a.lineTo(k[0],k[1]);break;case"M":a.moveTo(k[0],k[1]);break;case"C":a.bezierCurveTo(k[0],k[1],k[2],k[3],k[4],k[5]);break;case"Q":a.quadraticCurveTo(k[0],k[1],k[2],k[3]);break;case"A":var o=k[0],p=k[1],q=k[2],r=k[3],s=k[4],t=k[5],u=k[6],v=k[7],w=q>r?q:r,x=q>r?1:q/r,y=q>r?r/q:1;a.translate(o,p),a.rotate(u),a.scale(x,y),a.arc(0,0,w,s,s+t,1-v),a.scale(1/x,1/y),a.rotate(-u),a.translate(-o,-p);break;case"z":a.closePath()}}},getRect:function(a){if(a.__rect)return a.__rect;var b;b="stroke"==a.brushType||"fill"==a.brushType?a.lineWidth||1:0;for(var c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=Number.MAX_VALUE,f=Number.MIN_VALUE,g=a.x||0,h=a.y||0,i=a.pathArray||this.buildPathArray(a.path),j=0;j<i.length;j++)for(var k=i[j].points,l=0;l<k.length;l++)l%2===0?(k[l]+g<c&&(c=k[l]),k[l]+g>d&&(d=k[l])):(k[l]+h<e&&(e=k[l]),k[l]+h>f&&(f=k[l]));var m;return m=c===Number.MAX_VALUE||d===Number.MIN_VALUE||e===Number.MAX_VALUE||f===Number.MIN_VALUE?{x:0,y:0,width:0,height:0}:{x:Math.round(c-b/2),y:Math.round(e-b/2),width:d-c+b,height:f-e+b},a.__rect=m,m}},a("../tool/util").inherits(h,b),h});